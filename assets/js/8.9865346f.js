(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{382:function(e,t,n){"use strict";n.r(t);var r=n(27),a=function(e){e.options.__data__block__={mermaid_382ee14d:"sequenceDiagram\n  autonumber\n  participant U as User\n  participant S as Server\n  participant P as BankProxy\n  participant B as Bank\n\n  activate U\n  U->>+S: Request Bank Interaction\n  S->>+P: Create Interaction\n  P--)-S: RedirctURI\n  S--)-U: Browser Redirect\n\n  U->>+P: Redirect to BankProxy\n  loop\n    alt\n    P-)+U: Request User Interaction\n    U--)-P: Send UI results\n    else\n      P->>+B: Bank Request\n      B--)-P: Bank Response\n    end\n  end\n\n  P--\x3e>-U: Browser Redirect\n\n  U->>+S: Redirect to Server\n  S->>+P: Read Result\n  P--)-S: Result JSON\n  S->>S: Handle Result\n  S--)-U: Show Results\n  deactivate U\n",mermaid_382ee1e1:"sequenceDiagram\n  autonumber\n  participant U as User\n  participant S as Server\n  participant P as BankProxy\n  participant B as Bank\n\n  activate U\n  U->>+S: Request Bank Interaction\n  S->>+P: Request Interaction\n  loop\n    P->>+B: Bank Request\n    B--)-P: Bank Response\n  end\n  P--)-S: Result JSON\n  S->>S: Handle Result\n  S--)-U: Show Results\n  deactivate U\n"}},o=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"introduction"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#introduction"}},[e._v("#")]),e._v(" Introduction")]),e._v(" "),n("p",[e._v("BankProxy is a services, which helps with the interaction with the interfaces of banks. It supports retrieval of transaction and initiation of payments. The interface is based on the "),n("a",{attrs:{href:"https://www.berlin-group.org/psd2-access-to-bank-accounts",target:"_blank",rel:"noopener noreferrer"}},[n("em",[e._v("NextGenPSD2")]),n("OutboundLink")],1),e._v(" standard of the "),n("a",{attrs:{href:"https://www.berlin-group.org/",target:"_blank",rel:"noopener noreferrer"}},[n("em",[e._v("Berlin Group")]),n("OutboundLink")],1),e._v(" for maximum interoperability.")]),e._v(" "),n("p",[e._v("The service is meant to be deployed beside other services which need access to bank accounts. It provides an unified interface and provides an additional layer of security for handling sensitive login credentials.")]),e._v(" "),n("p",[e._v("BankProxy can call standardised REST API endpoints, parse the HTTP responses of the online banking interface or control a whole browser instance, to interact with the bank. Which behaviour will be used, depends on the selected "),n("em",[e._v("connector")]),e._v(", which must be configured for every account upfront.")]),e._v(" "),n("h2",{attrs:{id:"control-flow"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#control-flow"}},[e._v("#")]),e._v(" Control flow")]),e._v(" "),n("p",[e._v("The following diagram shows how the different actors interact. "),n("em",[e._v("User")]),e._v(" is usually an end-user with an browser, who want to trigger an interaction with a bank. This could be the retrieval of the latest transaction from a bank account or the initiation of an payment to e.g. pay an invoice. "),n("em",[e._v("Server")]),e._v(" is server component or application implementing the bussines logic, which benefits from access to a bank account. A server, which keeps track of invoices, could use the transaction history of a bank account to e.g. mark invoices as paid.")]),e._v(" "),n("Mermaid",{attrs:{id:"mermaid_382ee14d",graph:e.$dataBlock.mermaid_382ee14d}}),n("p",[n("strong",[e._v("(1)")]),e._v(": "),n("em",[e._v("User")]),e._v(" commands "),n("em",[e._v("Server")]),e._v(" to start a new interaction with the bank.")]),e._v(" "),n("p",[n("strong",[e._v("(2)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" creates a new interaction with an "),n("em",[e._v("callback URI")]),e._v(" at "),n("em",[e._v("BankProxy")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(3)")]),e._v(": "),n("em",[e._v("BankProxy")]),e._v(" returns a "),n("em",[e._v("URI")]),e._v(", to redirect the "),n("em",[e._v("User")]),e._v(" to.")]),e._v(" "),n("p",[n("strong",[e._v("(4)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" redirects the "),n("em",[e._v("User")]),e._v(" to the "),n("em",[e._v("URI")]),e._v(" return from "),n("em",[e._v("BankProxy")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(5)")]),e._v(": "),n("em",[e._v("User")]),e._v(" opens the "),n("em",[e._v("URI")]),e._v(" on "),n("em",[e._v("BankProxy")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(6-9)")]),e._v(": This steps depend on the used bank. In a typical flow the "),n("em",[e._v("User")]),e._v(" will be asked for a login name and to confirm a one-time token, while the "),n("em",[e._v("BankProxy")]),e._v(" interacts with the "),n("em",[e._v("Bank")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(10)")]),e._v(": If all previous steps were successful "),n("em",[e._v("BankProxy")]),e._v(" redirects the "),n("em",[e._v("User")]),e._v(" back to the "),n("em",[e._v("callbak URI")]),e._v(" of the "),n("em",[e._v("Server")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(11)")]),e._v(": "),n("em",[e._v("User")]),e._v(" opens the "),n("em",[e._v("callback URI")]),e._v(" on the "),n("em",[e._v("Server")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(12)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" loads the result from "),n("em",[e._v("BankProxy")]),e._v(" via an identifier passed in the "),n("em",[e._v("URI")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(13)")]),e._v(": "),n("em",[e._v("BankProxy")]),e._v(" sends the result to "),n("em",[e._v("Server")]),e._v(" and deletes it.")]),e._v(" "),n("p",[n("strong",[e._v("(14)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" handles the received result by e.g. importing it into a database.")]),e._v(" "),n("p",[n("strong",[e._v("(15)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" informs "),n("em",[e._v("User")]),e._v(" about the successful interaction.")]),e._v(" "),n("h2",{attrs:{id:"headless-control-flow"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#headless-control-flow"}},[e._v("#")]),e._v(" Headless Control Flow")]),e._v(" "),n("p",[e._v("BankProxy supports an additional way to interacti with the bank, to allow automatic retrieval of transaction without user interaction. This mode is not supported for all banks, since users can not e.g. confirm a two-factor login this way.")]),e._v(" "),n("Mermaid",{attrs:{id:"mermaid_382ee1e1",graph:e.$dataBlock.mermaid_382ee1e1}}),n("p",[n("strong",[e._v("(1)")]),e._v(": "),n("em",[e._v("User")]),e._v(" commands "),n("em",[e._v("Server")]),e._v(" to start a new interaction with the bank. This could happen via a scheduled task or cron job for automatic processing.")]),e._v(" "),n("p",[n("strong",[e._v("(2)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" commands "),n("em",[e._v("BankProxy")]),e._v(" to interact with the bank.")]),e._v(" "),n("p",[n("strong",[e._v("(3-4)")]),e._v(": "),n("em",[e._v("BankProxy")]),e._v(" interacts with the bank.")]),e._v(" "),n("p",[n("strong",[e._v("(5)")]),e._v(": "),n("em",[e._v("BankProxy")]),e._v(" sends the result to "),n("em",[e._v("Server")]),e._v(".")]),e._v(" "),n("p",[n("strong",[e._v("(6)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" handles the received result by e.g. importing it into a database.")]),e._v(" "),n("p",[n("strong",[e._v("(7)")]),e._v(": "),n("em",[e._v("Server")]),e._v(" informs "),n("em",[e._v("User")]),e._v(" about the successful interaction.")])],1)}),[],!1,null,null,null);"function"==typeof a&&a(o);t.default=o.exports}}]);